<html>

<head>
{% set cp = doc.company %}
{% set isNota = doc.tipoDoc in ['07', '08'] %}
{% set isAnticipo = doc.totalAnticipos is defined and doc.totalAnticipos > 0 %}
{% set name = doc.tipoDoc|catalog('01') %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{{ cp.ruc }}-{{doc.serie }}- {{doc.correlativo}}</title>
    <style type="text/css">
        .tabla-detraccion {
            width: 100%;
            border-collapse: collapse;

        }

        .tabla-detraccion td {

            font-size: 12px;

        }
        .bold,b,strong{
            font-weight:700
        }
        .anulado-print {
            position: absolute;
            width: 100%;
            height: 100%;
            font-size: 25px;
            color: red;
            z-index: 1;
            text-align: center;
            font-weight: bold;

        }

        .anulado-print span {
            font-size: 16px;
            color: red;

        }

        .logo {
            text-align: center;
        }

        .logo img {
            width: 40mm;
        }

        .empresa {
            text-align: center;
            // background-color: red;

        }

        .empresa h3 {
            font-size: 14px;
            margin: 0;
            padding: 0;
            color: #3d4b43;
        }

        .empresa h3 span {
            font-size: 11px;
            font-weight: normal;
        }

        .numero-ruc {
            top: 30mm;
            text-align: center;
            //background-color: green;
        }

        .numero-ruc h3 {
            font-size: 14px;
            margin: 0.7mm;
            padding: 0;
            color: #3d4b43;
        }

        .tabledesc {
            width: 77.5mm;
            // background-color: green;
        }

        .tabledesc .border {
            margin: 0mm;
            padding: 0mm;
            border-bottom: 0.1mm dotted #3d4b43;
        }

        .tabledesc tr {
            width: 77.5mm;
        }

        .tabledesc tr th {
            font-size: 14px;
            padding: 0.2mm;
            margin: 1mm;
            padding-bottom: 0mm;
            color: #3d4b43;


        }

        .tabledesc tr td {
            font-size: 12px;
            padding: 0.2mm;
            margin: 0;

        }

        .conte-detalles {
            margin-top: 1mm;
            border-bottom: 0.1mm dotted #3d4b43;
        }

        .table-totales {
            width: 100%;
            margin-top: 1mm;
            border-bottom: 0.1mm dotted #3d4b43;
        }

        .table-totales tr td {
            padding: 0.4mm;
            margin: 0.4mm;
            font-size: 13px;
            padding-bottom: 1mm
        }

        .table-cliente {
            width: 100%;
        }

        .table-cliente tr td {
            font-size: 12px;
            padding: 0.2mm;
            margin: 0;
        }

        .bar-code {
            margin-top: 1.5mm;
            text-align: center;
        }

        .en-letras {
            margin-top: 1mm;
            font-size: 9px;
        }

        .en-letras span {
            margin-top: 1mm;
            font-size: 9px;
        }

        .impresa {
            text-align: center;
            margin-top: 1.5mm;
            font-size: 9px;
        }

        .anulado-print {
            position: absolute;
            top: 13%;
            left: 2%;
            color: red;
            font-size: 20px;
            text-align: center;
            font-weight: bold
        }

        .anulado-print span {
            color: red;
        }

        .v5 {
            width: 5%;
        }

        .v10 {
            width: 10%;
        }

        .v15 {
            width: 15%;
        }

        .v20 {
            width: 20%;
        }

        .v25 {
            width: 25%;
        }

        .v30 {
            width: 30%;
        }

        .v35 {
            width: 35%;
        }

        .v40 {
            width: 40%;
        }

        .v45 {
            width: 45%;
        }

        .v50 {
            width: 50%;
        }

        .v55 {
            width: 55%;
        }

        .v60 {
            width: 60%;
        }

        .v65 {
            width: 65%;
        }

        .v70 {
            width: 70%;
        }

        .v75 {
            width: 75%;
        }

        .v80 {
            width: 80%;
        }

        .v100 {
            width: 100%;
        }

        .tabla-tipo-pago {
            width: 100%;
            border-collapse: collapse;
        }

        .tabla-tipo-pago td {
            border-bottom: 0.5px solid #333;
            font-size: 12px;

        }

        @page {
            margin: 0 !important;
            padding: 0 !important;
        }

        body{
            font-family:"open sans","Helvetica Neue",Helvetica,Arial,sans-serif;
            font-size:13px;
            color:#676a6c;
            overflow-x:hidden
        }

        .tabla_borde{
            border:1px solid #666;
            border-radius:10px
        }
        tr.border_bottom td{
            border-bottom:1px solid #000
        }
        tr.border_top td{
            border-top:1px solid #666
        }
        td.border_right{
            border-right:1px solid #666
        }
    </style>
</head>

<body style="margin: 0mm 0.5mm;;">
    <page backtop="1.5mm" backbottom="1.5mm" backleft="1.8mm" backright="1.5mm">
{# 
        @if ($venta->anulado == 'si')
            <div class="anulado-print">
                ANULADO<br>
                <span>
                    ticket de baja: 3000309
                </span>

            </div>
        @endif #}
        {# LOGO #}
        <div class="logo">
            <img class="v100" src="{{ params.system.logo|image_b64 }}" >
        </div>

        {# DATOS EMPRESA #}
        <div class="empresa">
            <h3>
                {{ cp.nombreComercial  }}<br>
                <br>
                <span>
                   {{ cp.address.direccion}}
                </span>
                <br>
                <span> {{ params.user.header|raw }}</span>
            </h3>

        </div>

       {# NUMERO RUC #}
        <div class="numero-ruc">
            <h3 class=""> {{ cp.ruc }}</h3>
            <h3>{{ name }} ELECTRÓNICA </h3>
            <h3>{{ doc.serie}}-{{ doc.correlativo }}</h3>
        </div>
     {% set cl = doc.client %}
        {# DESCRIPCION DE LA VENTA #}
        <div class="conte-cliente">
            <table class="table-cliente">
                <tr>
                    <td style="width:29mm; text-align:right;">Fecha de Emisión: </td>
                    <td style="width:42mm; text-align:left;"> {{ doc.fechaEmision|date('d/m/Y') }} {% if doc.fechaEmision|date('H:i:s') != '00:00:00' %} {{ doc.fechaEmision|date('H:i:s') }} {% endif %}</td>
                </tr>

            </table>

            <table class="table-cliente">
                <tr>
                    <td style="width:15mm; text-align:left;">Cliente: </td>
                    <td style="width:56mm; text-align:left;">{{ cl.rznSocial }}</td>
                </tr>
                <tr>
                    <td style="width:15mm; text-align:left;">RUC/DNI: </td>
                    <td style="width:56mm; text-align:left;">{{ cl.tipoDoc|catalog('06') }}:</strong>  {{ cl.numDoc }}</td>
                </tr>
                <tr>
                    <td style="width:15mm; text-align:left;">Direc: </td>
                    <td style="width:56mm; text-align:left;"> {% if cl.address %}{{ cl.address.direccion }}{% endif %}</td>
                </tr>  
                {% if isNota %}             
                <tr>
                    <td style="width:15mm; text-align:left;">Tipo Doc. Ref.:</td>
                    <td style="width:56mm; text-align:left;"> {{ doc.tipDocAfectado|catalog('01') }}</td>
                </tr>
                <tr>
                    <td style="width:15mm; text-align:left;">Documento Ref.:</td>
                    <td style="width:56mm; text-align:left;"> {{doc.numDocfectado }}</td>
                </tr>
                {% endif %}
                <tr>
                    <td style="width:15mm; text-align:left;">Tipo Moneda: </td>
                    <td style="width:56mm; text-align:left;">{{ doc.tipoMoneda|catalog('021') }}</td>
                </tr>
                {% if doc.guias %}
                <tr>
                    <td width="60%" align="left"><strong>Guias: </strong>
                    {% for guia in doc.guias %}
                        {{ guia.nroDoc }}&nbsp;&nbsp;
                    {% endfor %}</td>
                    <td width="40%"></td>
                </tr>
                {% endif %}


            </table>

        </div>

        {# DETALLE DE LA VENTA #}
         {% set moneda = doc.tipoMoneda|catalog('02') %}
        <div class="conte-detalles">
            <table class="tabledesc">
                <thead class="header">
                    <tr class="tr-head">
                        <th style="text-align:center; width:10mm;">Cant.</th>
                        <th style="text-align:center; width:30mm;">Descripción</th>
                        <th style="text-align:center; width:13mm;">P. Unitario</th>
                        <th style="text-align:center; width:13mm;">V. Total</th>
                    </tr>
                    <tr>
                        <th colspan="4" class="border"></th>
                    </tr>
                </thead>

                <tbody>
                {# MOSTRAR ANTICIPOS #}
                    {% if params.user.anticipos is defined %}

                    {{ params.user.anticipos|raw }}

                {% endif %}

                {% for det in doc.details %}
                    <tr>
                        <td style="width:10mm; text-align:center;"> {{ det.cantidad|n_format }}
                            {{ det.unidad }}</td>
                        <td style="width:30mm; text-align:center;">{{ det.descripcion }}</td>
                        <td style="width:14mm;"> {{ moneda }}
                            {{ det.mtoPrecioUnitario|n_format }}</td>
                        <td style="width:14mm;"> {{ moneda }}
                            {{ (det.mtoPrecioUnitario * det.cantidad)|n_format }}</td>
                    </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>

        {# TOTALES DE LA VENTA #}
        <div class="conte-totales">

            <table class="table-totales">
                {% if isAnticipo %}
                <tr>
                    <td style="width:49mm; text-align:right;">Total Anticipo: </td>
                    <td style="width:21mm; text-align:left">{{ moneda }}  {{ doc.totalAnticipos|n_format }}
                    </td>
                </tr>
                {% endif %} 

                {% if doc.mtoOperGravadas %}
                <tr>
                    <td style="width:49mm; text-align:right;">Gravadas: </td>
                    <td style="width:21mm; text-align:left"> {{ moneda }}  {{ doc.mtoOperGravadas|n_format }}
                    </td>
                </tr>
                {% endif %}
                {% if doc.mtoOperExoneradas %}
                <tr>
                    <td style="width:49mm; text-align:right;">Exoneradas: </td>
                    <td style="width:21mm; text-align:left">{{ moneda }}  {{ doc.mtoOperExoneradas|n_format }}
                    </td>
                </tr>
                {% endif %}
                {% if doc.mtoOperInafectas %}
                <tr>
                    <td style="width:49mm; text-align:right;">Inafectas: </td>
                    <td style="width:21mm; text-align:left">{{ moneda }}  {{ doc.mtoOperInafectas|n_format }}
                    </td>
                </tr>
                {% endif %}
              
                <tr>
                    <td style="width:49mm; text-align:right;">I.G.V.{% if params.user.numIGV is defined %} {{ params.user.numIGV }}%{% endif %}: </td>
                    <td style="width:21mm; text-align:left"> {{ moneda }}  {{ doc.mtoIGV|n_format }}</td>

                </tr>
                {# MOSTRAR DESCUENTO SI TIENE  #}
                {% if doc.descuentos %}
                    {{ params.user.descuento|raw }}
                {% endif %}

                 {% if doc.mtoISC %}
                <tr>
                    <td style="width:49mm; text-align:right;">I.S.C.: </td>
                    <td style="width:21mm; text-align:left">{{ moneda }}  {{ doc.mtoISC|n_format }}</td>

                </tr>
                {% endif %}

                {% if  doc.sumOtrosCargos %}
               <tr>
                    <td style="width:49mm; text-align:right;">Otros Cargos: </td>
                    <td style="width:21mm; text-align:left">{{ moneda }}  {{ doc.sumOtrosCargos|n_format }}</td>

                </tr>
                {% endif %}

                {% if doc.icbper %}
                <tr>
                    <td style="width:49mm; text-align:right;">I.C.B.P.E.R.:</td>
                    <td style="width:21mm; text-align:left">{{ moneda }}  {{ doc.icbper|n_format }}</td>

                </tr>
                {% endif %}

                {% if doc.mtoOtrosTributos %}
                <tr>
                    <td style="width:49mm; text-align:right;">Otros Tributos:</td>
                    <td style="width:21mm; text-align:left">{{ moneda }}  {{ doc.mtoOtrosTributos|n_format }}</td>

                </tr>
                {% endif %}

                <tr>
                    <td style="width:49mm; text-align:right;">Precio Venta: </td>
                    <td style="width:21mm; text-align:left">{{ moneda }}  {{ doc.mtoImpVenta|n_format }}</td>

                </tr>     

                {% if doc.perception and doc.perception.mto %}    
                    {% set perc = doc.perception %}
                    {% set soles = 'PEN'|catalog('02') %}       
                    <tr>
                        <td style="width:49mm; text-align:right;">Percepción: </td>
                        <td style="width:21mm; text-align:left">{{ soles }}  {{ perc.mto|n_format }}</td>

                    </tr>                
                    <tr>
                        <td style="width:49mm; text-align:right;">Total a Pagar: </td>
                        <td style="width:21mm; text-align:left">{{ soles }} {{ perc.mtoTotal|n_format }}</td>

                    </tr>
                {% endif %}


            </table>

        </div>

        {# EN LETRAS #}
        <div class="en-letras">
            <span>  {{ legend(doc.legends, '1000')  }}</span>
        </div>
            
        {# CODIGO QR #}
        <div class="bar-code">
            <img src="{{ qrCode(doc)|image_b64('svg+xml') }}" alt="Qr Image">
        </div>

        </br>
        {# DETRACCION DETALLES #}
        {% if params.user.detraccion is defined %}

         {{ params.user.detraccion|raw }}

        {% endif %}
        <br>
        {# INFORMACION ADICIONAL #}
        <table class="tabla-tipo-pago">

            <tr>
                <td colspan="2">
                    <b>Información Adicional</b>
                </td>
            </tr>

            <tr>
                <td >
                    LEYENDA
                </td>
                <td width="70%" style="font-size: 10px;">
                    <p>
                        {% for leg in doc.legends %}
                        {% if leg.code != '1000' %}
                            {{ leg.value }}<br>
                        {% endif %}
                        {% endfor %}
                    </p>
                </td>
            </tr>

            {% if isNota %}
                <tr>
                    <td class="v45"> MOTIVO DE EMISIÓN:</td>

                    <td class="v55">{{ doc.desMotivo }}</td>
                </tr>
            {% endif %}

            {% if params.user.extras is defined %}
                {% for item in params.user.extras %}
                    <tr>
                        <td class="v45">
                            {{ item.name|upper }}:
                        </td>
                        <td width="70%" style="font-size: 10px;">
                            {{ item.value }}
                        </td>
                    </tr>
                {% endfor %}
            {% endif %}

            <br>
            {# CUOTAS #}
            {% if params.user.cuotas is defined %}
            <tr>
                <td colspan="2">
                    <b>Información credito</b>
                </td>
            </tr>
            {{ params.user.cuotas|raw }}

            {% endif %}

     
            {# OBSERVACIONES #}
            {# <tr>
                <td colspan="2" style="text-align:center">OBSERVACIONES:</td>
            </tr>
            <tr>
                <td class="mayu" colspan="2">comentario</td>
            </tr>
           #}
        </table>

        {% if isAnticipo %}
            <table class="tabla-tipo-pago">
                <tr>
                    <td colspan="2">
                        <b>Anticipo</b>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        Nro. Doc.
                    </td>

                    <td width="70%" style="font-size: 10px;">
                        <p>
                            Total
                        </p>
                    </td>
                </tr>
                {% for atp in doc.anticipos %}
                    <tr>
                        <td width="30%">{{ atp.nroDocRel }}</td>
                        <td width="70%">{{ moneda }} {{ atp.total|n_format }}</td>
                    </tr>
                {% endfor %}
            </table>
        {% endif %}

        <table class="impresa" width="100%" border="0" cellpadding="0" cellspacing="0">
            <tbody>
                <tr>
                    <td>
                        <blockquote>
                            {% if params.system.hash is defined and params.system.hash%}
                                <strong>Resumen:</strong>   {{ params.system.hash }}<br>
                            {% endif %}<br>

                            <span>Representación Impresa de la {{ name }} ELECTRÓNICA.</span>

                        </blockquote>
                    </td>
                </tr>
                <tr>
                    <td>
                        {% if params.user.footer is defined %}
                            {{ params.user.footer|raw }}
                        {% endif %}
                    </td>
                </tr>
            </tbody>
        </table>
    </page>
</body>

</html>
